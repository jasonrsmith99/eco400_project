library(tidyverse)
library(tidyselect)
library(vtable)
internet <- read_csv("data/nov19pub.csv")
#general CPS data to include
demo_vars <- read_csv("data/demo_yes_vars.csv")
industry_codes <- read_csv("data/industry_codes.csv")
occupation_codes <- read_csv("data/occupation_codes.csv")
load("~/RWD/projects/internet_cps_cleaning/output/cps_clean.RData")
View(cps_supplement)
sum(is.na(cps_supplement$PEMARITL))/nrow(cps_supplement$PEMARITL)
sum(is.na(cps_supplement$PEMARITL))
nrow(cps_supplement$PEMARITL)
summary(cps_supplement$PEMARITL)
nrow(cps_supplement)
sum(is.na(cps_supplement$PEMARITL))/nrow(cps_supplement)
sum(!is.na(cps_supplement$PEMARITL))/nrow(cps_supplement)
cps_long <- cps_supplement %>%
pivot_longer(everything(), names_to = "vars", values_to = "values")
cps_int <- cps_supplement %>%
as.integer(cps_supplement$HRHHID)
cps_int <- cps_supplement %>%
cps_supplement$HRHHID = as.integer(cps_supplement$HRHHID)
cps_int <- cps_supplement %>%
group_by(colnames())
?group_by
cps_vars <- colnames(cps_supplement)
cps_supplement %>%
group_by(.dots = cps_vars)
cps_supplement %>%
group_by_at(cps_vars)
cps_supplement %>%
group_by_at(cps_vars) %>%
summarise(response = !is.na(.x)/117095)
cps_supplement %>%
group_by_at(cps_vars) %>%
summarise(response = !is.na()/117095)
cps_supplement %>%
summarise_at(vars(-group_cols()), -is.na(x)/117095)
cps_supplement %>%
summarise_at(vars(-group_cols()), -is.na(.x)/117095)
cps_supplement %>%
summarise_at(vars(-group_cols()), -is.na(.vars)/117095)
cps_supplement %>%
summarise_at(vars(-group_cols()), -is.na(vars)/117095)
library(tidyverse)
map_dfc(cps_supplement, ~-is.na(.x)/117095)
map_dfc(cps_vars, ~-is.na(.x)/117095)
map_dfc2(cps_supplement, cps_vars ~-is.na(.x$.y)/117095)
map2_dfc(cps_supplement, cps_vars ~-is.na(.x$.y)/117095)
map2_dfc()
?map2_dfc()
map2_dfc(cps_supplement, cps_vars, ~-is.na(.x$.y)/117095)
is.na(cps_supplement[1])
sum(is.na(cps_supplement[1]))
sum(is.na(cps_supplement[13]))
sum(is.na(cps_supplement[14]))
map2_dfc(cps_supplement, 1:56, ~sum(-is.na(.x[.y]))/117095)
sum(-is.na(cps_supplement[14]/117095))
sum(-is.na(cps_supplement[14])/117095)
sum(is.na(cps_supplement[14])/117095)
-sum(is.na(cps_supplement[14])/117095)
!sum(is.na(cps_supplement[14])/117095)
sum(!is.na(cps_supplement[14])/117095)
sum(is.na(cps_supplement[14])/117095)
1-sum(is.na(cps_supplement[14])/117095)
class(cps_supplement[2]) == character
class(cps_supplement[2])
class(cps_supplement[,2])
class(cps_supplement$HRHHID)
for (i in 1:ncol(cps_supplement)) {
1 - sum(is.na(cps_supplement[i])) / 117095
}
percents <- for (i in 1:ncol(cps_supplement)) {
1 - sum(is.na(cps_supplement[i])) / 117095
}
percent <- list()
for (i in 1:ncol(cps_supplement)) {
output <-  - sum(is.na(cps_supplement[i])) / 117095
list[i] <- output
}
for (i in 1:ncol(cps_supplement)) {
output <-  - sum(is.na(cps_supplement[i])) / 117095
list[i] = output
}
for (i in 1:ncol(cps_supplement)) {
output <-  - sum(is.na(cps_supplement[i])) / 117095
list[[i]] = output
}
for (i in 1:ncol(cps_supplement)) {
output <-  - sum(is.na(cps_supplement[i])) / 117095
}
for (i in 1:ncol(cps_supplement)) {
output <-  1 - sum(is.na(cps_supplement[i])) / 117095
}
for (i in 1:ncol(cps_supplement)) {
output <-  1 - sum(is.na(cps_supplement[i])) / 117095
percent[[i]] = output
}
View(percent)
for (i in 1:ncol(cps_supplement)) {
output <-  1 - sum(is.na(cps_supplement[i])) / 117095
percent[[i]] = output
}
percent <- vector()
for (i in 1:ncol(cps_supplement)) {
output <-  1 - sum(is.na(cps_supplement[i])) / 117095
percent[[i]] = output
}
response_rate <- data.frame(cps_vars, percent)
View(response_rate)
1 - sum(is.na(cps_supplement[14])) / 117095
(1 - sum(is.na(cps_supplement[14])) / 117095) * 100
percent <- vector()
for (i in 1:ncol(cps_supplement)) {
output <-  (1 - sum(is.na(cps_supplement[i])) / 117095) * 100
percent[[i]] = output
}
response_rate <- data.frame(cps_vars, percent)
library(tidyverse)
load("output/cps_clean.RData")
cps_vars <- colnames(cps_supplement)
percent <- vector()
for (i in 1:ncol(cps_supplement)) {
output <-  (1 - sum(is.na(cps_supplement[i])) / 117095) * 100
percent[[i]] = output
}
response_rate <- data.frame(cps_vars, percent)
View(response_rate)
response_rate <- data.frame(cps_vars, percent)
response_rate <- data.frame(cps_vars, percent)
response_rate %>%
group_by(cps_vars) %>%
summary(response_rate = percent)
response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent)
response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate)
response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate) %>%
knitr::kable()
#create table of response rates
response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate) %>%
knitr::kable()
#create table of response rates
response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate) %>%
vtable::vtable()
response_rate <- data.frame(cps_vars, percent)
response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate) %>%
knitr::kable()
?Hmisc::latex()
library(htmlTable)
table <- response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate)
htmlTable(table,
cgroup = c("set 1:28", "set 29:56"),
n.cgroup = c(2, 2),
rnames = FALSE)
table_2_cols <- cbind(table[1:28, ], table[29:56, ])
View(table_2_cols)
htmlTable(table_2_col,
cgroup = c("set 1:28", "set 29:56"),
n.cgroup = c(2, 2),
rnames = FALSE)
htmlTable(table_2_cols,
cgroup = c("set 1:28", "set 29:56"),
n.cgroup = c(2, 2),
rnames = FALSE)
?htmlTable
table_2_cols <- cbind(table[1:28, ], table[29:56, ]) %>%
htmlTable(table_2_cols,
cgroup = c("set 1:28", "set 29:56"),
n.cgroup = c(2, 2),
rnames = FALSE)
table_2_cols <- cbind(table[1:28, ], table[29:56, ]) %>%
mutate(across(is.numeric, ~round(., 2)))
table <- response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate) %>%
mutate(across(is.numeric, ~round(., 2)))
table <- response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate) %>%
mutate(across(where(is.numeric), ~round(., 2)))
View(table)
table_2_cols <- cbind(table[1:28, ], table[29:56, ])
htmlTable(table_2_cols,
cgroup = c("set 1:28", "set 29:56"),
n.cgroup = c(2, 2),
rnames = FALSE)
library(Hmisc)
library(hmisc)
library(Hmisc)
latex(table_2_cols)
?latex
options(xdvicmd='xdvi')
latex(table_2_cols)
options(dvipscmd='dvips')
latex(table_2_cols)
latex(table_2_cols)
options(xdvicmd='yap')
latex(table_2_cols)
library(tidyverse)
library(htmlTable)
library(Hmisc)
load("output/cps_clean.RData")
cps_vars <- colnames(cps_supplement)
percent <- vector()
for (i in 1:ncol(cps_supplement)) {
output <-  (1 - sum(is.na(cps_supplement[i])) / 117095) * 100
percent[[i]] = output
}
latex(table_2_cols)
response_rate <- data.frame(cps_vars, percent)
table <- response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate) %>%
mutate(across(where(is.numeric), ~round(., 2)))
cps_vars <- colnames(cps_supplement)
percent <- vector()
for (i in 1:ncol(cps_supplement)) {
output <-  (1 - sum(is.na(cps_supplement[i])) / 117095) * 100
percent[[i]] = output
}
response_rate <- data.frame(cps_vars, percent)
table <- response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate) %>%
mutate(across(where(is.numeric), ~round(., 2)))
View(response_rate)
response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate)
response_rate %>%
group_by(cps_vars
esponse_rate %>%
response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent)
table <- response_rate %>%
group_by(cps_vars) %>%
summarize(response_rate = percent) %>%
arrange(response_rate) %>%
mutate(across(where(is.numeric), ~round(., 2)))
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2)))
table_2_cols <- cbind(table[1:28, ], table[29:56, ])
table_2_cols <- cbind(response_rate[1:28, ], response_rate[29:56, ])
htmlTable(response_rate,
cgroup = c("set 1:28", "set 29:56"),
n.cgroup = c(2, 2),
rnames = FALSE)
htmlTable(table_2_cols,
cgroup = c("set 1:28", "set 29:56"),
n.cgroup = c(2, 2),
rnames = FALSE)
latex(table_2_cols)
table_2_cols %>%
knitr::kable()
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2)))
table_2_cols <- cbind(response_rate[1:14, ], response_rate[15:28, ], response_rate[29:42, ], response_rate[43:56, ])
table_2_cols %>%
knitr::kable()
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2))) %>%
arrange(desc(percent))
table_2_cols <- cbind(response_rate[1:14, ], response_rate[15:28, ], response_rate[29:42, ], response_rate[43:56, ])
table_2_cols %>%
knitr::kable()
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2))) %>%
arrange(percent)
table_2_cols <- cbind(response_rate[1:14, ], response_rate[15:28, ], response_rate[29:42, ], response_rate[43:56, ])
table_2_cols %>%
knitr::kable()
table_2_cols %>%
knitr::kable()
#create nice table of response rates
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2))) %>%
rename(cps_vars = "Variable", percent = "Response Rate")
#create nice table of response rates
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2))) %>%
rename("Variable" = cps_vars) %>%
arrange(percent)
table_2_cols <- cbind(response_rate[1:14, ], response_rate[15:28, ], response_rate[29:42, ], response_rate[43:56, ])
#create nice table of response rates
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2))) %>%
rename("Variable" = cps_vars, "Response Rate" = percent) %>%
arrange(percent)
table_2_cols <- cbind(response_rate[1:14, ], response_rate[15:28, ], response_rate[29:42, ], response_rate[43:56, ])
#create nice table of response rates
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2))) %>%
mutate(across(where(is.numeric), ~paste('%'))) %>%
rename("Variable" = cps_vars, "Response Rate" = percent) %>%
arrange(percent)
table_2_cols <- cbind(response_rate[1:14, ], response_rate[15:28, ], response_rate[29:42, ], response_rate[43:56, ])
#create nice table of response rates
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2))) %>%
mutate(across(where(is.numeric), ~paste0(.,'%'))) %>%
rename("Variable" = cps_vars, "Response Rate" = percent) %>%
arrange(percent)
table_2_cols <- cbind(response_rate[1:14, ], response_rate[15:28, ], response_rate[29:42, ], response_rate[43:56, ])
#create nice table of response rates
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2))) %>%
rename("Variable" = cps_vars, "Response Rate" = percent) %>%
arrange(percent)
table_2_cols <- cbind(response_rate[1:14, ], response_rate[15:28, ], response_rate[29:42, ], response_rate[43:56, ])
#create nice table of response rates
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2))) %>%
mutate(across(where(is.numeric), ~paste0(.,'/%'))) %>%
rename("Variable" = cps_vars, "Response Rate" = percent) %>%
arrange(percent)
table_2_cols <- cbind(response_rate[1:14, ], response_rate[15:28, ], response_rate[29:42, ], response_rate[43:56, ])
knitr::knit2pdf("response_rate_table.Rmd", "output/table.pdf")
knitr::knit("response_rate_table.Rmd", "output/table.pdf")
knitr::knit("response_rate_table.Rmd", "output/table.pdf")
knitr::knit()
?knitr::knit()
library(tidyverse)
library(knitr)
load("output/cps_clean.RData")
knit("response_rate_table.Rmd", "output/table.pdf")
load("output/cps_clean.RData")
library(tidyverse)
library(knitr)
load("output/cps_clean.RData")
#get variables names
cps_vars <- colnames(cps_supplement)
#calculate response rate for each variable. Store in vector
percent <- vector()
for (i in 1:ncol(cps_supplement)) {
output <-  (1 - sum(is.na(cps_supplement[i])) / 117095) * 100
percent[[i]] = output
}
#create nice table of response rates
response_rate <- data.frame(cps_vars, percent) %>%
mutate(across(where(is.numeric), ~round(., 2))) %>%
rename("Variable" = cps_vars, "Response Rate" = percent) %>%
arrange(percent)
table_2_cols <- cbind(response_rate[1:14, ], response_rate[15:28, ], response_rate[29:42, ], response_rate[43:56, ])
table_2_cols %>%
knitr::kable() %>%
kableExtra::save_kable()
table_2_cols %>%
knitr::kable() %>%
kableExtra::save_kable(file = "output/test_table.pdf")
table_2_cols %>%
knitr::kable()
table_2_cols
kable(table_2_cols)
table_2_cols
pdf(table_2_cols, file = "output/table.pdf")
pdf(file = "output/table.pdf")
table_2_cols
dev.off()
kable(table_2_cols) %>%
kableExtra::save_kable("output/table.pdf")
kable(table_2_cols) %>%
kableExtra::save_kable("output/table.pdf")
kable(table_2_cols) %>%
kableExtra::save_kable("output/table.pdf")
library(tidyverse)
library(knitr)
load("output/cps_clean.RData")
library(tidyverse)
library(knitr)
load(here::here("data", "cps_clean.RData"))
library(tidyverse)
library(tidyselect)
internet <- read_csv(here::here("data", "nov19pub.csv"))
#general CPS data to include
demo_vars <- read_csv(here::here("data", "included_vars.csv"))
industry_codes <- read_csv(here::here("data", "industry_codes.csv"))
occupation_codes <- read_csv(here::here("data", "occupation_codes.csv"))
library(tidyverse)
load(here::here("data", "cps_clean.RData"))
load("~/RWD/projects/eco400_project/data/cps_clean.RData")
View(cps_supplement)
